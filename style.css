:root {
    --bg-color: #0f1115;
    --card-bg: #161b22;
    --text-primary: #f0f6fc;
    --text-secondary: #8b949e;
    --accent-color: #58a6ff;
    --accent-hover: #79c0ff;
    --border-color: #30363d;
    --error-color: #f85149;
    --success-color: #3fb950;
    --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    --font-mono: 'JetBrains Mono', 'SFMono-Regular', Consolas, "Liberation Mono", Menlo, monospace;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: var(--font-sans);
    background-color: var(--bg-color);
    color: var(--text-primary);
    line-height: 1.6;
    height: 100vh;
    /* Full viewport height */
    display: flex;
    flex-direction: column;
    overflow: hidden;
    /* Prevent body scroll, handle inside containers */
}

.container {
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
    height: 100%;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

header {
    flex-shrink: 0;
}

header h1 {
    font-size: 2rem;
    font-weight: 700;
    background: linear-gradient(135deg, #58a6ff 0%, #a371f7 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.25rem;
}

header p {
    color: var(--text-secondary);
    font-size: 1rem;
}

main {
    flex: 1;
    display: grid;
    grid-template-columns: 1fr 1fr;
    /* Side by side */
    gap: 2rem;
    min-height: 0;
    /* Important for nested scrolling */
    /* align-items: start; Removed to allow stretch */
}

.input-group {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    justify-content: center;
    height: 100%;
    overflow-y: auto;
    /* Allow input side to scroll if needed, though unlikely */
}

label {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.input-wrapper {
    display: flex;
    gap: 10px;
}

input[type="text"] {
    flex: 1;
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 12px 16px;
    color: var(--text-primary);
    font-family: var(--font-mono);
    font-size: 1rem;
    transition: border-color 0.2s, box-shadow 0.2s;
}

input[type="text"]:focus {
    outline: none;
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.15);
}

button {
    cursor: pointer;
    border: none;
    border-radius: 8px;
    font-family: var(--font-sans);
    font-weight: 600;
    font-size: 1rem;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    white-space: nowrap;
}

.primary-btn {
    background-color: var(--accent-color);
    color: #ffffff;
    padding: 0 24px;
}

.primary-btn:hover {
    background-color: var(--accent-hover);
    transform: translateY(-1px);
}

.primary-btn:active {
    transform: translateY(0);
}

.secondary-btn {
    background-color: transparent;
    color: var(--text-secondary);
    border: 1px solid var(--border-color);
    padding: 6px 12px;
    font-size: 0.85rem;
}

.secondary-btn:hover {
    color: var(--text-primary);
    border-color: var(--text-secondary);
    background-color: rgba(255, 255, 255, 0.05);
}

.options-group {
    display: flex;
    gap: 1.5rem;
    margin-top: 0.5rem;
}

.checkbox-wrapper {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    user-select: none;
}

.checkbox-wrapper input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background-color: var(--card-bg);
    cursor: pointer;
    position: relative;
    transition: all 0.2s ease;
}

.checkbox-wrapper input[type="checkbox"]:checked {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
}

.checkbox-wrapper input[type="checkbox"]:checked::after {
    content: "";
    position: absolute;
    left: 5px;
    top: 2px;
    width: 4px;
    height: 8px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
}

.checkbox-label {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.checkbox-wrapper:hover .checkbox-label {
    color: var(--text-primary);
}

.error-message {
    color: var(--error-color);
    font-size: 0.9rem;
    min-height: 1.5em;
    opacity: 0;
    transition: opacity 0.2s;
}

.error-message.visible {
    opacity: 1;
}

.output-group {
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    height: 100%;
    /* Fill height */
    max-height: 100%;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s ease;
    pointer-events: none;
    overflow: hidden;
    /* Ensure no scroll on container */
}

.output-group.visible {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

.output-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    flex-shrink: 0;
}

.output-actions {
    display: flex;
    align-items: center;
    gap: 16px;
}

.checkbox-wrapper.small {
    gap: 6px;
}

.checkbox-wrapper.small input[type="checkbox"] {
    width: 16px;
    height: 16px;
}

.checkbox-wrapper.small .checkbox-label {
    font-size: 0.85rem;
}

.code-wrapper {
    background-color: #0d1117;
    border-radius: 8px;
    padding: 16px;
    border: 1px solid var(--border-color);
    flex: 1;
    overflow-y: auto;
    /* Scroll inside the code block */
    position: relative;
    min-height: 0;
    /* Crucial for flex child scrolling */
}

code {
    font-family: var(--font-mono);
    font-size: 0.9rem;
    white-space: pre-wrap;
    /* Wrap long lines */
    word-break: break-all;
    color: var(--text-primary);
}

.hidden {
    display: none;
    /* Still needed for initial state logic in JS, but we might want to revisit if we want to reserve space */
}

/* Override hidden for grid layout stability if we want it to just be invisible but take space? 
   No, let's keep it hidden until needed, but on desktop it will just pop into the right column.
*/

footer {
    text-align: center;
    color: var(--text-secondary);
    font-size: 0.85rem;
    flex-shrink: 0;
}

footer code {
    background-color: rgba(110, 118, 129, 0.2);
    padding: 2px 5px;
    border-radius: 4px;
    font-size: 0.8em;
}

/* Loading state */
.primary-btn.loading span {
    display: none;
}

.primary-btn.loading::after {
    content: "";
    width: 16px;
    height: 16px;
    border: 2px solid #ffffff;
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Mobile Optimization */
@media (max-width: 768px) {
    body {
        height: 100vh;
        /* Fixed height on mobile too */
        overflow: hidden;
    }

    .container {
        padding: 1rem;
        height: 100%;
    }

    main {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .input-group {
        justify-content: flex-start;
        height: auto;
        flex-shrink: 0;
        /* Don't shrink input area */
    }

    .output-group {
        height: auto;
        flex: 1;
        /* Take remaining space */
        min-height: 0;
        /* Allow shrinking to fit */
    }

    .input-wrapper {
        flex-direction: column;
    }

    .primary-btn {
        width: 100%;
        padding: 12px;
    }
}